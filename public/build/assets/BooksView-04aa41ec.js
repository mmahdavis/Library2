import{_ as se,E as oe,G as ie,d as h,H as ne,I as de,e as d,b as o,u as q,w as n,F as M,o as r,X as re,a,z as ue,g as S,t as i,n as w,f as y,h as P,J as B,O as T,i as u,p as ce,m as me}from"./app-5ae7d91e.js";import{_ as pe}from"./AppLayout-6336a29c.js";import"./layout-69baa60e.js";const D=p=>(ce("data-v-fc796ee4"),p=p(),me(),p),ve={class:"grid"},he={class:"col-12"},be={class:"card"},fe={class:"list-none p-0 m-0 flex align-items-center font-medium mb-3"},ye=D(()=>a("li",{class:"px-2"},[a("i",{class:"pi pi-angle-right text-500 line-height-3"})],-1)),ge={class:"text-900 line-height-3"},ke={class:"my-2"},_e={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},$e={class:"m-0"},Se={class:"block mt-2 md:mt-0 p-input-icon-left"},we=D(()=>a("i",{class:"pi pi-search"},null,-1)),Ve={class:"p-column-title"},Ce={class:"p-column-title"},Be={class:"p-column-title"},Te=["src","alt"],De={class:"p-column-title"},Ie={class:"p-column-title"},Re={class:"p-column-title"},Me={class:"p-column-title"},Ne=["src","alt"],Le={class:"field"},Oe={for:"name"},Ue={key:0,class:"p-invalid"},qe={class:"field"},Pe={for:"inventoryStatus",class:"mb-3"},Ee={key:0,class:"p-invalid"},je={class:"formgrid grid"},Fe={class:"field col"},ze={for:"price"},Ke={key:0,class:"p-invalid"},We={class:"field col"},Ae={for:"quantity"},Qe={key:0,class:"p-invalid"},Ye={class:"field"},Ge={class:"mb-3"},He={class:"formgrid grid"},Je={class:"field-radiobutton col-6"},Xe={for:"category1"},Ze={class:"field"},xe={class:"mb-3"},et={key:0,class:"p-1"},tt={class:"field"},lt={class:"mb-3"},at={class:"field"},st={class:"mb-3"},ot={class:"field"},it={class:"mb-3"},nt={class:"flex align-items-center justify-content-center"},dt=D(()=>a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),rt={key:0},ut={class:"flex align-items-center justify-content-center"},ct=D(()=>a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),mt={key:0},pt={__name:"BooksView",props:{books:Object,categories:Object,tags:Object,writers:Object,publishers:Object,translators:Object},setup(p){const E=p,{t:I}=oe(),b=ie(),f=h(!1),k=h(!1),_=h(!1),t=h({}),$=h(null),N=h(null),V=h({}),c=h(!1),j=h([{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}]);ne(()=>{G()});const F=e=>e.toLocaleString("fa-IR",{style:"currency",currency:"IRR"}),z=()=>{f.value=!1,c.value=!1},K=e=>{t.value=e,k.value=!0},W=e=>{B.delete(route("books.destroy",[[e.id]])).then(s=>{k.value=!1,b.add({severity:"success",summary:"Successful ",detail:I("Messages.Toast.Success.BookDelete"),life:3e3}),T.reload()}).catch(s=>{b.add({severity:"error",summary:"Error",detail:s.message,life:3e3})})},A=()=>{N.value.exportCSV()},Q=()=>{_.value=!0},Y=()=>{const e=[];$.value.forEach(s=>{e.push(s.id)}),B.delete(route("books.destroy",[e])).then(s=>{_.value=!1,b.add({severity:"success",summary:"Successful ",detail:I("Messages.Toast.Success.BooksDelete"),life:3e3}),T.reload()}).catch(s=>{b.add({severity:"error",summary:"Error",detail:s.message,life:3e3})})},G=()=>{V.value={global:{value:null,matchMode:de.CONTAINS}}},H=()=>{t.value={},c.value=!1,f.value=!0},L=()=>{t.value.inventoryStatus=t.value.inventoryStatus.label||t.value.inventoryStatus,t.value.writer=t.value.writer.id,t.value.publisher=t.value.publisher.id,t.value.translator=t.value.translator.id,t.value.tags&&(t.value.tag=[],t.value.tags.forEach(e=>{t.value.tag.push(e.id)}),delete t.value.tags)},J=()=>{c.value=!0,t.value.name&&t.value.name.trim()&&t.value.price&&(t.value.id?(L(),B.put(route("books.update",[t.value.id,t.value])).then(e=>{console.log(e),f.value=!1,t.value={},b.add({severity:"success",summary:"Successful",detail:I("Messages.Toast.Success.BooksCreated"),life:3e3}),T.reload()}).catch(e=>{b.add({severity:"error",summary:"Error",detail:e.message,life:3e3})})):(L(),B.post(route("books.store",[t.value])).then(e=>{f.value=!1,t.value={},b.add({severity:"success",summary:"Successful",detail:"Book Created",life:3e3}),T.reload()}).catch(e=>{b.add({severity:"error",summary:"Error",detail:e.message,life:3e3})})))},X=e=>{t.value={...e},f.value=!0};return(e,s)=>{const Z=u("Toast"),m=u("Button"),x=u("Toolbar"),O=u("InputText"),v=u("Column"),ee=u("Rating"),te=u("DataTable"),C=u("Dropdown"),U=u("InputNumber"),le=u("RadioButton"),ae=u("MultiSelect"),R=u("Dialog");return r(),d(M,null,[o(q(re),{title:"Books"}),o(pe,null,{default:n(()=>[a("div",ve,[a("div",he,[a("div",be,[o(Z),a("ul",fe,[a("li",null,[o(q(ue),{href:"/dashboard",class:"text-500 no-underline line-height-3 cursor-pointer"},{default:n(()=>[S(i(e.$t("Dashboard")),1)]),_:1})]),ye,a("li",null,[a("span",ge,i(e.$t("Books")),1)])]),o(x,{class:"mb-4"},{start:n(()=>[a("div",ke,[o(m,{label:e.$t("New"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:H},null,8,["label"]),o(m,{label:e.$t("Delete"),icon:"pi pi-trash",class:"p-button-danger",onClick:Q,disabled:!$.value||!$.value.length},null,8,["label","disabled"])])]),end:n(()=>[o(m,{label:e.$t("Export"),icon:"pi pi-upload",class:"p-button-help",onClick:s[0]||(s[0]=l=>A(l))},null,8,["label"])]),_:1}),o(te,{ref_key:"dt",ref:N,value:E.books,selection:$.value,"onUpdate:selection":s[2]||(s[2]=l=>$.value=l),dataKey:"id",paginator:!0,rows:10,filters:V.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} books",responsiveLayout:"scroll"},{header:n(()=>[a("div",_e,[a("h5",$e,i(e.$t("Manage"))+" "+i(e.$t("Books")),1),a("span",Se,[we,o(O,{modelValue:V.value.global.value,"onUpdate:modelValue":s[1]||(s[1]=l=>V.value.global.value=l),placeholder:e.$t("Search")+"..."},null,8,["modelValue","placeholder"])])])]),default:n(()=>[o(v,{selectionMode:"multiple",headerStyle:"width: 3rem"}),o(v,{field:"code",header:e.$t("Code"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[a("span",Ve,i(e.$t("Code")),1),S(" "+i(l.data.code),1)]),_:1},8,["header"]),o(v,{field:"name",header:e.$t("Name"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[a("span",Ce,i(e.$t("Name")),1),S(" "+i(l.data.name),1)]),_:1},8,["header"]),o(v,{header:e.$t("Image"),headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[a("span",Be,i(e.$t("Image")),1),a("img",{src:l.data.thumbline,alt:l.data.thumbline,class:"shadow-2",width:"100"},null,8,Te)]),_:1},8,["header"]),o(v,{field:"price",header:e.$t("Price"),sortable:!0,headerStyle:"width:14%; min-width:8rem;"},{body:n(l=>[a("span",De,i(e.$t("Price")),1),S(" "+i(F(l.data.price)),1)]),_:1},8,["header"]),o(v,{field:"category",header:e.$t("Category"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[a("span",Ie,i(e.$t("Category")),1),S(" "+i(l.data.category.name),1)]),_:1},8,["header"]),o(v,{field:"rating",header:e.$t("Reviews"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[a("span",Re,i(e.$t("Reviews")),1),o(ee,{modelValue:l.data.like,readonly:!0,cancel:!1},null,8,["modelValue"])]),_:1},8,["header"]),o(v,{field:"inventoryStatus",header:e.$t("Status"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:n(l=>[a("span",Me,i(e.$t("Status")),1),a("span",{class:w("book-badge status-"+(l.data.inventoryStatus?l.data.inventoryStatus.toLowerCase():""))},i(l.data.inventoryStatus),3)]),_:1},8,["header"]),o(v,{headerStyle:"min-width:10rem;"},{body:n(l=>[o(m,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:g=>X(l.data)},null,8,["onClick"]),o(m,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger mt-2",onClick:g=>K(l.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),o(R,{visible:f.value,"onUpdate:visible":s[11]||(s[11]=l=>f.value=l),style:{width:"450px"},header:t.value.id?e.$t("Edit")+" "+e.$t("Book"):e.$t("Add")+" "+e.$t("Book"),modal:!0,class:"p-fluid"},{footer:n(()=>[o(m,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:z}),o(m,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:J})]),default:n(()=>[a("img",{src:t.value.thumbline?t.value.thumbline:"https://fakeimg.pl/320x220/",alt:e.$t("BookImage"),width:"150",class:"mt-0 mx-auto mb-5 block shadow-2"},null,8,Ne),a("div",Le,[a("label",Oe,i(e.$t("Name")),1),o(O,{id:"name",modelValue:t.value.name,"onUpdate:modelValue":s[3]||(s[3]=l=>t.value.name=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":c.value&&!t.value.name})},null,8,["modelValue","class"]),c.value&&!t.value.name?(r(),d("small",Ue,i(e.$t("Messages.Required.Name")),1)):y("",!0)]),a("div",qe,[a("label",Pe,i(e.$t("InventoryStatus")),1),o(C,{id:"inventoryStatus",modelValue:t.value.inventoryStatus,"onUpdate:modelValue":s[4]||(s[4]=l=>t.value.inventoryStatus=l),options:j.value,optionLabel:"label",placeholder:e.$t("Select.Status"),class:w({"p-invalid":c.value&&!t.value.inventoryStatus})},null,8,["modelValue","options","placeholder","class"]),c.value&&!t.value.inventoryStatus?(r(),d("small",Ee,i(e.$t("Messages.Required.InventoryStatus")),1)):y("",!0)]),a("div",je,[a("div",Fe,[a("label",ze,i(e.$t("Price")),1),o(U,{id:"price",modelValue:t.value.price,"onUpdate:modelValue":s[5]||(s[5]=l=>t.value.price=l),mode:"currency",currency:"IRR",locale:"fa-IR",class:w({"p-invalid":c.value&&!t.value.price}),required:!0},null,8,["modelValue","class"]),c.value&&!t.value.price?(r(),d("small",Ke,i(e.$t("Messages.Required.Price")),1)):y("",!0)]),a("div",We,[a("label",Ae,i(e.$t("Quantity")),1),o(U,{id:"quantity",modelValue:t.value.quantity,"onUpdate:modelValue":s[6]||(s[6]=l=>t.value.quantity=l),integeronly:"",class:w({"p-invalid":c.value&&!t.value.quantity})},null,8,["modelValue","class"]),c.value&&!t.value.quantity?(r(),d("small",Qe,i(e.$t("Messages.Required.Quantity")),1)):y("",!0)])]),a("div",Ye,[a("label",Ge,i(e.$t("Category")),1),a("div",He,[(r(!0),d(M,null,P(p.categories,l=>(r(),d("div",Je,[o(le,{id:"category1",name:"category",value:l.id,modelValue:t.value.category,"onUpdate:modelValue":g=>t.value.category=g},null,8,["value","modelValue","onUpdate:modelValue"]),a("label",Xe,i(l.name),1)]))),256))])]),a("div",Ze,[a("label",xe,i(e.$t("Tags")),1),o(ae,{modelValue:t.value.tags,"onUpdate:modelValue":s[7]||(s[7]=l=>t.value.tags=l),options:p.tags,optionLabel:"name",placeholder:e.$t("Select.Tags"),filter:!0},{value:n(l=>[(r(!0),d(M,null,P(l.value,g=>(r(),d("div",{class:"inline-flex align-items-center py-1 px-2 bg-primary text-primary border-round mr-2",key:g.id},[a("div",null,i(g.name),1)]))),128)),!l.value||l.value.length===0?(r(),d("div",et,i(e.$t("Select.Tags")),1)):y("",!0)]),_:1},8,["modelValue","options","placeholder"])]),a("div",tt,[a("label",lt,i(e.$t("Writer")),1),o(C,{modelValue:t.value.writer,"onUpdate:modelValue":s[8]||(s[8]=l=>t.value.writer=l),options:p.writers,optionLabel:"name",placeholder:e.$t("Select.Writer")},null,8,["modelValue","options","placeholder"])]),a("div",at,[a("label",st,i(e.$t("Publisher")),1),o(C,{modelValue:t.value.publisher,"onUpdate:modelValue":s[9]||(s[9]=l=>t.value.publisher=l),options:p.publishers,optionLabel:"name",placeholder:e.$t("Select.Publisher")},null,8,["modelValue","options","placeholder"])]),a("div",ot,[a("label",it,i(e.$t("Translator")),1),o(C,{modelValue:t.value.translator,"onUpdate:modelValue":s[10]||(s[10]=l=>t.value.translator=l),options:p.translators,optionLabel:"name",placeholder:e.$t("Select.Translator")},null,8,["modelValue","options","placeholder"])])]),_:1},8,["visible","header"]),o(R,{visible:k.value,"onUpdate:visible":s[14]||(s[14]=l=>k.value=l),style:{width:"450px"},header:e.$t("Confirm")+" "+e.$t("Delete"),modal:!0},{footer:n(()=>[o(m,{label:e.$t("No"),icon:"pi pi-times",class:"p-button-text",onClick:s[12]||(s[12]=l=>k.value=!1)},null,8,["label"]),o(m,{label:e.$t("Yes"),icon:"pi pi-check",class:"p-button-text",onClick:s[13]||(s[13]=l=>W(t.value))},null,8,["label"])]),default:n(()=>[a("div",nt,[dt,t.value?(r(),d("span",rt,i(e.$t("Messages.Confirm.Delete",{name:t.value.name})),1)):y("",!0)])]),_:1},8,["visible","header"]),o(R,{visible:_.value,"onUpdate:visible":s[16]||(s[16]=l=>_.value=l),style:{width:"450px"},header:e.$t("Confirm")+" "+e.$t("Delete"),modal:!0},{footer:n(()=>[o(m,{label:e.$t("No"),icon:"pi pi-times",class:"p-button-text",onClick:s[15]||(s[15]=l=>_.value=!1)},null,8,["label"]),o(m,{label:e.$t("Yes"),icon:"pi pi-check",class:"p-button-text",onClick:Y},null,8,["label"])]),default:n(()=>[a("div",ut,[ct,t.value?(r(),d("span",mt,i(e.$t("Messages.Confirm.DeleteBooks")),1)):y("",!0)])]),_:1},8,["visible","header"])])])])]),_:1})],64)}}},ft=se(pt,[["__scopeId","data-v-fc796ee4"]]);export{ft as default};
