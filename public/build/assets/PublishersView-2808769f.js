import{_ as W,G as Z,d as v,H as ee,I as le,e as c,b as a,u as q,w as i,F as M,o as p,X as te,a as s,z as se,g as _,t as k,n as N,f,h as ae,J as C,O as T,i as r,p as oe,m as ie}from"./app-5ae7d91e.js";import{_ as ne}from"./AppLayout-6336a29c.js";import"./layout-69baa60e.js";const n=h=>(oe("data-v-57f67564"),h=h(),ie(),h),ue={class:"grid"},re={class:"col-12"},de={class:"card"},ce={class:"list-none p-0 m-0 flex align-items-center font-medium mb-3"},pe=n(()=>s("li",{class:"px-2"},[s("i",{class:"pi pi-angle-right text-500 line-height-3"})],-1)),me=n(()=>s("li",null,[s("span",{class:"text-900 line-height-3"},"Publishers")],-1)),ve={class:"my-2"},he={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},be=n(()=>s("h5",{class:"m-0"},"Manage Publishers",-1)),_e={class:"block mt-2 md:mt-0 p-input-icon-left"},fe=n(()=>s("i",{class:"pi pi-search"},null,-1)),ye=n(()=>s("span",{class:"p-column-title"},"Name",-1)),ge=n(()=>s("span",{class:"p-column-title"},"Image",-1)),Se=n(()=>s("img",{src:"https://fakeimg.pl/320x220/",alt:"https://fakeimg.pl/320x220/",class:"shadow-2",width:"100"},null,-1)),xe=n(()=>s("span",{class:"p-column-title"},"Slug",-1)),ke=["src"],we={class:"field"},Ve=n(()=>s("label",{for:"name"},"Name",-1)),Pe={key:0,class:"p-invalid"},Ce={class:"field"},De=n(()=>s("label",{for:"inventoryStatus",class:"mb-3"},"Inventory Status",-1)),Ne={key:0,class:"p-invalid"},Te={class:"formgrid grid"},Ie={class:"field col"},Le=n(()=>s("label",{for:"quantity"},"Quantity",-1)),Ue={key:0,class:"p-invalid"},qe={class:"field"},Me=n(()=>s("label",{class:"mb-3"},"Tags",-1)),Ee={key:0,class:"p-1"},Be={class:"field"},$e=n(()=>s("label",{class:"mb-3"},"publisher",-1)),Fe={class:"field"},Oe=n(()=>s("label",{class:"mb-3"},"publisher",-1)),je={class:"field"},ze=n(()=>s("label",{class:"mb-3"},"translator",-1)),Re={class:"flex align-items-center justify-content-center"},Ae=n(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Qe={key:0},Ye={class:"flex align-items-center justify-content-center"},Ge=n(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),He={key:0},Je={__name:"PublishersView",props:{publishers:Object},setup(h){const E=h,m=Z(),b=v(!1),y=v(!1),g=v(!1),e=v({}),S=v(null),I=v(null),w=v({}),d=v(!1);ee(()=>{R()});const B=()=>{b.value=!1,d.value=!1},$=o=>{e.value=o,y.value=!0},F=o=>{C.delete(route("publishers.destroy",[[o.id]])).then(l=>{y.value=!1,m.add({severity:"success",summary:"Successful ",detail:"Publisher Deleted",life:3e3}),T.reload()}).catch(l=>{m.add({severity:"error",summary:"Error",detail:l.message,life:3e3})})},O=()=>{I.value.exportCSV()},j=()=>{g.value=!0},z=()=>{const o=[];S.value.forEach(l=>{o.push(l.id)}),C.delete(route("publishers.destroy",[o])).then(l=>{g.value=!1,m.add({severity:"success",summary:"Successful ",detail:"Publishers Deleted",life:3e3}),T.reload()}).catch(l=>{m.add({severity:"error",summary:"Error",detail:l.message,life:3e3})})},R=()=>{w.value={global:{value:null,matchMode:le.CONTAINS}}},A=()=>{e.value={},d.value=!1,b.value=!0},L=()=>{e.value.inventoryStatus=e.value.inventoryStatus.label||e.value.inventoryStatus,e.value.publisher=e.value.publisher.id,e.value.publisher=e.value.publisher.id,e.value.translator=e.value.translator.id,e.value.tags&&(e.value.tag=[],e.value.tags.forEach(o=>{e.value.tag.push(o.id)}),delete e.value.tags)},Q=()=>{d.value=!0,e.value.name&&e.value.name.trim()&&(e.value.id?(L(),C.put(route("publishers.update",[e.value.id,e.value])).then(o=>{console.log(o),b.value=!1,e.value={},m.add({severity:"success",summary:"Successful",detail:"Publisher Created",life:3e3})}).catch(o=>{m.add({severity:"error",summary:"Error",detail:o.message,life:3e3})})):(L(),C.post(route("publishers.store",[e.value])).then(o=>{b.value=!1,e.value={},m.add({severity:"success",summary:"Successful",detail:"Publisher Created",life:3e3}),T.reload()}).catch(o=>{m.add({severity:"error",summary:"Error",detail:o.message,life:3e3})})))},Y=o=>{e.value={...o},b.value=!0};return(o,l)=>{const G=r("Toast"),u=r("Button"),H=r("Toolbar"),U=r("InputText"),x=r("Column"),J=r("DataTable"),V=r("Dropdown"),K=r("InputNumber"),X=r("MultiSelect"),D=r("Dialog");return p(),c(M,null,[a(q(te),{title:"Publishers"}),a(ne,null,{default:i(()=>[s("div",ue,[s("div",re,[s("div",de,[a(G),s("ul",ce,[s("li",null,[a(q(se),{href:"/dashboard",class:"text-500 no-underline line-height-3 cursor-pointer"},{default:i(()=>[_("dashboard")]),_:1})]),pe,me]),a(H,{class:"mb-4"},{start:i(()=>[s("div",ve,[a(u,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:A}),a(u,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:j,disabled:!S.value||!S.value.length},null,8,["disabled"])])]),end:i(()=>[a(u,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:l[0]||(l[0]=t=>O(t))})]),_:1}),a(J,{ref_key:"dt",ref:I,value:E.publishers,selection:S.value,"onUpdate:selection":l[2]||(l[2]=t=>S.value=t),dataKey:"id",paginator:!0,rows:10,filters:w.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} publishers",responsiveLayout:"scroll"},{header:i(()=>[s("div",he,[be,s("span",_e,[fe,a(U,{modelValue:w.value.global.value,"onUpdate:modelValue":l[1]||(l[1]=t=>w.value.global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),default:i(()=>[a(x,{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(x,{field:"name",header:"Name",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:i(t=>[ye,_(" "+k(t.data.name),1)]),_:1}),a(x,{header:"Image",headerStyle:"width:14%; min-width:10rem;"},{body:i(t=>[ge,Se]),_:1}),a(x,{field:"slug",header:"Slug",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:i(t=>[xe,_(" "+k(t.data.slug),1)]),_:1}),a(x,{headerStyle:"min-width:10rem;"},{body:i(t=>[a(u,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:P=>Y(t.data)},null,8,["onClick"]),a(u,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger mt-2",onClick:P=>$(t.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),a(D,{visible:b.value,"onUpdate:visible":l[10]||(l[10]=t=>b.value=t),style:{width:"450px"},header:"Publisher Details",modal:!0,class:"p-fluid"},{footer:i(()=>[a(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:B}),a(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:Q})]),default:i(()=>[s("img",{src:e.value.thumbline?e.value.thumbline:"https://fakeimg.pl/320x220/",alt:"publisher image",width:"150",class:"mt-0 mx-auto mb-5 block shadow-2"},null,8,ke),s("div",we,[Ve,a(U,{id:"name",modelValue:e.value.name,"onUpdate:modelValue":l[3]||(l[3]=t=>e.value.name=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:N({"p-invalid":d.value&&!e.value.name})},null,8,["modelValue","class"]),d.value&&!e.value.name?(p(),c("small",Pe,"Name is required.")):f("",!0)]),s("div",Ce,[De,_(" "+k(e.value.inventoryStatus)+" ",1),a(V,{id:"inventoryStatus",modelValue:e.value.inventoryStatus,"onUpdate:modelValue":l[4]||(l[4]=t=>e.value.inventoryStatus=t),options:o.statuses,optionLabel:"label",placeholder:"Select a Status",class:N({"p-invalid":d.value&&!e.value.inventoryStatus})},null,8,["modelValue","options","class"]),d.value&&!e.value.inventoryStatus?(p(),c("small",Ne,"InventoryStatus is required.")):f("",!0)]),s("div",Te,[s("div",Ie,[Le,a(K,{id:"quantity",modelValue:e.value.quantity,"onUpdate:modelValue":l[5]||(l[5]=t=>e.value.quantity=t),integeronly:"",class:N({"p-invalid":d.value&&!e.value.quantity})},null,8,["modelValue","class"]),d.value&&!e.value.quantity?(p(),c("small",Ue,"Quantity is required.")):f("",!0)])]),s("div",qe,[Me,a(X,{modelValue:e.value.tags,"onUpdate:modelValue":l[6]||(l[6]=t=>e.value.tags=t),options:o.tags,optionLabel:"name",placeholder:"Select Tags",filter:!0},{value:i(t=>[(p(!0),c(M,null,ae(t.value,P=>(p(),c("div",{class:"inline-flex align-items-center py-1 px-2 bg-primary text-primary border-round mr-2",key:P.id},[s("div",null,k(P.name),1)]))),128)),!t.value||t.value.length===0?(p(),c("div",Ee,"Select Tags")):f("",!0)]),_:1},8,["modelValue","options"])]),s("div",Be,[$e,a(V,{modelValue:e.value.publisher,"onUpdate:modelValue":l[7]||(l[7]=t=>e.value.publisher=t),options:h.publishers,optionLabel:"name",placeholder:"Select Publisher"},null,8,["modelValue","options"])]),s("div",Fe,[Oe,a(V,{modelValue:e.value.publisher,"onUpdate:modelValue":l[8]||(l[8]=t=>e.value.publisher=t),options:h.publishers,optionLabel:"name",placeholder:"Select publisher"},null,8,["modelValue","options"])]),s("div",je,[ze,a(V,{modelValue:e.value.translator,"onUpdate:modelValue":l[9]||(l[9]=t=>e.value.translator=t),options:o.translators,optionLabel:"name",placeholder:"Select translator"},null,8,["modelValue","options"])])]),_:1},8,["visible"]),a(D,{visible:y.value,"onUpdate:visible":l[13]||(l[13]=t=>y.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[a(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:l[11]||(l[11]=t=>y.value=!1)}),a(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:l[12]||(l[12]=t=>F(e.value))})]),default:i(()=>[s("div",Re,[Ae,e.value?(p(),c("span",Qe,[_("Are you sure you want to delete "),s("b",null,k(e.value.name),1),_("?")])):f("",!0)])]),_:1},8,["visible"]),a(D,{visible:g.value,"onUpdate:visible":l[15]||(l[15]=t=>g.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[a(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:l[14]||(l[14]=t=>g.value=!1)}),a(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:z})]),default:i(()=>[s("div",Ye,[Ge,e.value?(p(),c("span",He,"Are you sure you want to delete the selected publishers?")):f("",!0)])]),_:1},8,["visible"])])])])]),_:1})],64)}}},Ze=W(Je,[["__scopeId","data-v-57f67564"]]);export{Ze as default};
