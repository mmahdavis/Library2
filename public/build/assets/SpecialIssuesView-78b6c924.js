import{_ as Z,G as ee,d as v,H as se,I as le,e as c,b as a,u as q,w as o,F as M,o as p,X as te,a as l,z as ae,g as h,t as y,n as N,f as g,h as ie,J as C,O as T,i as d,p as oe,m as ne}from"./app-5ae7d91e.js";import{_ as ue}from"./AppLayout-6336a29c.js";import"./layout-69baa60e.js";const n=f=>(oe("data-v-72a010f2"),f=f(),ne(),f),de={class:"grid"},re={class:"col-12"},ce={class:"card"},pe={class:"list-none p-0 m-0 flex align-items-center font-medium mb-3"},me=n(()=>l("li",{class:"px-2"},[l("i",{class:"pi pi-angle-right text-500 line-height-3"})],-1)),ve=n(()=>l("li",null,[l("span",{class:"text-900 line-height-3"},"Special Issues")],-1)),_e={class:"my-2"},he={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},fe=n(()=>l("h5",{class:"m-0"},"Manage SpecialIssues",-1)),be={class:"block mt-2 md:mt-0 p-input-icon-left"},ye=n(()=>l("i",{class:"pi pi-search"},null,-1)),ge=n(()=>l("span",{class:"p-column-title"},"Name",-1)),Se=n(()=>l("span",{class:"p-column-title"},"Image",-1)),Ie=n(()=>l("img",{src:"https://fakeimg.pl/320x220/",alt:"https://fakeimg.pl/320x220/",class:"shadow-2",width:"100"},null,-1)),xe=n(()=>l("span",{class:"p-column-title"},"Price",-1)),ke=n(()=>l("span",{class:"p-column-title"},"Slug",-1)),we=["src"],Ve={class:"field"},Ce=n(()=>l("label",{for:"name"},"Name",-1)),De={key:0,class:"p-invalid"},Ne={class:"field"},Te=n(()=>l("label",{for:"inventoryStatus",class:"mb-3"},"Inventory Status",-1)),Le={key:0,class:"p-invalid"},Pe={class:"formgrid grid"},Ue={class:"field col"},qe=n(()=>l("label",{for:"quantity"},"Quantity",-1)),Me={key:0,class:"p-invalid"},Ee={class:"field"},Re=n(()=>l("label",{class:"mb-3"},"Tags",-1)),Be={key:0,class:"p-1"},$e={class:"field"},Fe=n(()=>l("label",{class:"mb-3"},"special_issue",-1)),Oe={class:"field"},je=n(()=>l("label",{class:"mb-3"},"publisher",-1)),ze={class:"field"},Ae=n(()=>l("label",{class:"mb-3"},"translator",-1)),Qe={class:"flex align-items-center justify-content-center"},Ye=n(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ge={key:0},He={class:"flex align-items-center justify-content-center"},Je=n(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ke={key:0},Xe={__name:"SpecialIssuesView",props:{special_issues:Object},setup(f){const E=f,m=ee(),_=v(!1),S=v(!1),I=v(!1),e=v({}),x=v(null),L=v(null),k=v({}),r=v(!1);se(()=>{A()});const R=i=>i.toLocaleString("fa-IR",{style:"currency",currency:"IRR"}),B=()=>{_.value=!1,r.value=!1},$=i=>{e.value=i,S.value=!0},F=i=>{C.delete(route("special_issues.destroy",[[i.id]])).then(t=>{S.value=!1,m.add({severity:"success",summary:"Successful ",detail:"SpecialIssue Deleted",life:3e3}),T.reload()}).catch(t=>{m.add({severity:"error",summary:"Error",detail:t.message,life:3e3})})},O=()=>{L.value.exportCSV()},j=()=>{I.value=!0},z=()=>{const i=[];x.value.forEach(t=>{i.push(t.id)}),C.delete(route("special_issues.destroy",[i])).then(t=>{I.value=!1,m.add({severity:"success",summary:"Successful ",detail:"SpecialIssues Deleted",life:3e3}),T.reload()}).catch(t=>{m.add({severity:"error",summary:"Error",detail:t.message,life:3e3})})},A=()=>{k.value={global:{value:null,matchMode:le.CONTAINS}}},Q=()=>{e.value={},r.value=!1,_.value=!0},P=()=>{e.value.inventoryStatus=e.value.inventoryStatus.label||e.value.inventoryStatus,e.value.special_issue=e.value.special_issue.id,e.value.publisher=e.value.publisher.id,e.value.translator=e.value.translator.id,e.value.tags&&(e.value.tag=[],e.value.tags.forEach(i=>{e.value.tag.push(i.id)}),delete e.value.tags)},Y=()=>{r.value=!0,e.value.name&&e.value.name.trim()&&(e.value.id?(P(),C.put(route("special_issues.update",[e.value.id,e.value])).then(i=>{console.log(i),_.value=!1,e.value={},m.add({severity:"success",summary:"Successful",detail:"SpecialIssue Created",life:3e3})}).catch(i=>{m.add({severity:"error",summary:"Error",detail:i.message,life:3e3})})):(P(),C.post(route("special_issues.store",[e.value])).then(i=>{_.value=!1,e.value={},m.add({severity:"success",summary:"Successful",detail:"SpecialIssue Created",life:3e3}),T.reload()}).catch(i=>{m.add({severity:"error",summary:"Error",detail:i.message,life:3e3})})))},G=i=>{e.value={...i},_.value=!0};return(i,t)=>{const H=d("Toast"),u=d("Button"),J=d("Toolbar"),U=d("InputText"),b=d("Column"),K=d("DataTable"),w=d("Dropdown"),X=d("InputNumber"),W=d("MultiSelect"),D=d("Dialog");return p(),c(M,null,[a(q(te),{title:"SpecialIssues"}),a(ue,null,{default:o(()=>[l("div",de,[l("div",re,[l("div",ce,[a(H),l("ul",pe,[l("li",null,[a(q(ae),{href:"/dashboard",class:"text-500 no-underline line-height-3 cursor-pointer"},{default:o(()=>[h("dashboard")]),_:1})]),me,ve]),a(J,{class:"mb-4"},{start:o(()=>[l("div",_e,[a(u,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:Q}),a(u,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:j,disabled:!x.value||!x.value.length},null,8,["disabled"])])]),end:o(()=>[a(u,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:t[0]||(t[0]=s=>O(s))})]),_:1}),a(K,{ref_key:"dt",ref:L,value:E.special_issues,selection:x.value,"onUpdate:selection":t[2]||(t[2]=s=>x.value=s),dataKey:"id",paginator:!0,rows:10,filters:k.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} special_issues",responsiveLayout:"scroll"},{header:o(()=>[l("div",he,[fe,l("span",be,[ye,a(U,{modelValue:k.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=s=>k.value.global.value=s),placeholder:"Search..."},null,8,["modelValue"])])])]),default:o(()=>[a(b,{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(b,{field:"name",header:"Name",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(s=>[ge,h(" "+y(s.data.name),1)]),_:1}),a(b,{header:"Image",headerStyle:"width:14%; min-width:10rem;"},{body:o(s=>[Se,Ie]),_:1}),a(b,{field:"price",header:"Price",sortable:!0,headerStyle:"width:14%; min-width:8rem;"},{body:o(s=>[xe,h(" "+y(R(s.data.price)),1)]),_:1}),a(b,{field:"slug",header:"Slug",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:o(s=>[ke,h(" "+y(s.data.slug),1)]),_:1}),a(b,{headerStyle:"min-width:10rem;"},{body:o(s=>[a(u,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:V=>G(s.data)},null,8,["onClick"]),a(u,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger mt-2",onClick:V=>$(s.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),a(D,{visible:_.value,"onUpdate:visible":t[10]||(t[10]=s=>_.value=s),style:{width:"450px"},header:"SpecialIssue Details",modal:!0,class:"p-fluid"},{footer:o(()=>[a(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:B}),a(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:Y})]),default:o(()=>[l("img",{src:e.value.thumbline?e.value.thumbline:"https://fakeimg.pl/320x220/",alt:"special_issue image",width:"150",class:"mt-0 mx-auto mb-5 block shadow-2"},null,8,we),l("div",Ve,[Ce,a(U,{id:"name",modelValue:e.value.name,"onUpdate:modelValue":t[3]||(t[3]=s=>e.value.name=s),modelModifiers:{trim:!0},required:"true",autofocus:"",class:N({"p-invalid":r.value&&!e.value.name})},null,8,["modelValue","class"]),r.value&&!e.value.name?(p(),c("small",De,"Name is required.")):g("",!0)]),l("div",Ne,[Te,h(" "+y(e.value.inventoryStatus)+" ",1),a(w,{id:"inventoryStatus",modelValue:e.value.inventoryStatus,"onUpdate:modelValue":t[4]||(t[4]=s=>e.value.inventoryStatus=s),options:i.statuses,optionLabel:"label",placeholder:"Select a Status",class:N({"p-invalid":r.value&&!e.value.inventoryStatus})},null,8,["modelValue","options","class"]),r.value&&!e.value.inventoryStatus?(p(),c("small",Le,"InventoryStatus is required.")):g("",!0)]),l("div",Pe,[l("div",Ue,[qe,a(X,{id:"quantity",modelValue:e.value.quantity,"onUpdate:modelValue":t[5]||(t[5]=s=>e.value.quantity=s),integeronly:"",class:N({"p-invalid":r.value&&!e.value.quantity})},null,8,["modelValue","class"]),r.value&&!e.value.quantity?(p(),c("small",Me,"Quantity is required.")):g("",!0)])]),l("div",Ee,[Re,a(W,{modelValue:e.value.tags,"onUpdate:modelValue":t[6]||(t[6]=s=>e.value.tags=s),options:i.tags,optionLabel:"name",placeholder:"Select Tags",filter:!0},{value:o(s=>[(p(!0),c(M,null,ie(s.value,V=>(p(),c("div",{class:"inline-flex align-items-center py-1 px-2 bg-primary text-primary border-round mr-2",key:V.id},[l("div",null,y(V.name),1)]))),128)),!s.value||s.value.length===0?(p(),c("div",Be,"Select Tags")):g("",!0)]),_:1},8,["modelValue","options"])]),l("div",$e,[Fe,a(w,{modelValue:e.value.special_issue,"onUpdate:modelValue":t[7]||(t[7]=s=>e.value.special_issue=s),options:f.special_issues,optionLabel:"name",placeholder:"Select SpecialIssue"},null,8,["modelValue","options"])]),l("div",Oe,[je,a(w,{modelValue:e.value.publisher,"onUpdate:modelValue":t[8]||(t[8]=s=>e.value.publisher=s),options:i.publishers,optionLabel:"name",placeholder:"Select publisher"},null,8,["modelValue","options"])]),l("div",ze,[Ae,a(w,{modelValue:e.value.translator,"onUpdate:modelValue":t[9]||(t[9]=s=>e.value.translator=s),options:i.translators,optionLabel:"name",placeholder:"Select translator"},null,8,["modelValue","options"])])]),_:1},8,["visible"]),a(D,{visible:S.value,"onUpdate:visible":t[13]||(t[13]=s=>S.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:o(()=>[a(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[11]||(t[11]=s=>S.value=!1)}),a(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:t[12]||(t[12]=s=>F(e.value))})]),default:o(()=>[l("div",Qe,[Ye,e.value?(p(),c("span",Ge,[h("Are you sure you want to delete "),l("b",null,y(e.value.name),1),h("?")])):g("",!0)])]),_:1},8,["visible"]),a(D,{visible:I.value,"onUpdate:visible":t[15]||(t[15]=s=>I.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:o(()=>[a(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[14]||(t[14]=s=>I.value=!1)}),a(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:z})]),default:o(()=>[l("div",He,[Je,e.value?(p(),c("span",Ke,"Are you sure you want to delete the selected special_issues?")):g("",!0)])]),_:1},8,["visible"])])])])]),_:1})],64)}}},ss=Z(Xe,[["__scopeId","data-v-72a010f2"]]);export{ss as default};
